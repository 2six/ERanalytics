---
layout: none
---
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>티어별 실험체</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
  <link rel="shortcut icon" href="/favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="/favicon/site.webmanifest" />
  <style>
    /* --- 수정: 드롭다운 컨트롤 영역 레이아웃 (1행 2열 테이블 사용) --- */
    .dropdowns {
        margin-bottom: 10px; /* 드롭다운 아래에 여백 추가 */
        text-align: center; /* 내부 테이블을 가운데 정렬하기 위해 부모에 text-align */
        background-color: transparent; /* 부모 컨테이너 배경색 투명 */
    }
    .dropdowns table {
        margin: 0 auto; /* 가운데 정렬 */
        border-collapse: collapse; /* 셀 간 간격 제거 */
        border: none; /* 테이블 테두리 제거 */
        background-color: transparent; /* 배경색 투명 */
        border-spacing: 0; /* 셀 간격 제거 */
        /* --- 추가: 데이터 표와 동일한 너비 설정 --- */
        width: 1400px;
        max-width: 95vw;
        min-width: 600px;
        /* --------------------------------------- */
    }
    .dropdowns table tr {
        border: none; /* 행 테두리 제거 */
    }
    .dropdowns table td {
        border: none; /* 셀 테두리 제거 */
        padding: 5px; /* 셀 패딩 조정 */
        vertical-align: top; /* 셀 내용 상단 정렬 */
        background-color: transparent; /* 셀 배경색 투명 */
    }

    /* 1행 1열 (드롭다운 세트들) 셀 스타일 */
    .dropdowns .data-sets-cell {
        /* 너비는 내용에 따라 자동 조정 */
        padding-right: 20px; /* 체크박스 셀과의 간격 */
        white-space: nowrap; /* 줄바꿈 방지 */
    }

    /* 1행 2열 (체크박스) 셀 스타일 */
    .dropdowns .checkbox-cell {
        white-space: nowrap; /* 줄바꿈 방지 */
    }

    /* 각 데이터 세트 (레이블 + 드롭다운 세트) 컨테이너 */
    .dropdowns .data-set-row {
        display: flex; /* 내부 요소들을 가로로 배치 */
        align-items: center; /* 세로 중앙 정렬 */
        gap: 10px; /* 레이블과 드롭다운 세트 사이 간격 */
        /* div는 기본적으로 블록 요소이므로 줄바꿈 발생 */
    }

    /* "데이터 1 :" 및 "데이터 2 :" 레이블 스타일 */
     .dropdowns .dropdown-label { /* 클래스 선택자 사용 */
         display: none; /* 기본 숨김 (일반 모드) */
         /* --- 추가: 레이블 너비 및 정렬 --- */
         width: 80px; /* 레이블 고정 너비 (텍스트 길이에 따라 조정 필요) */
         flex-shrink: 0; /* 공간 부족해도 줄어들지 않음 */
         text-align: right; /* 텍스트 우측 정렬 */
         /* ----------------------------- */
     }
    /* 비교 모드일 때만 표시 */
     body.is-compare-mode .dropdowns .dropdown-label { /* 비교 모드일 때 모든 레이블 span 표시 */
         display: inline-block; /* inline-block으로 설정하여 너비 적용 */
     }

    /* 드롭다운 세트 컨테이너 스타일 */
    .dropdowns .dropdown-set {
        display: flex; /* 내부 드롭다운들을 Flexbox로 배치 */
        gap: 10px; /* 드롭다운들 사이에 간격 추가 */
        align-items: center; /* 드롭다운들 세로 중앙 정렬 */
        flex-wrap: wrap; /* 공간 부족 시 줄바꿈 허용 */
    }

    /* 데이터 2 세트 (비교 모드 컨트롤) */
    #comparison-controls {
        display: none; /* 기본적으로 숨김 (JS에서 제어) */
        margin-top: 10px; /* 데이터 1 세트와의 세로 간격 */
    }
    /* ------------------------------------------------- */


    /* --- 수정: 티어 테이블 페이지 스타일 (메인 표) --- */
    /* tier-table 클래스를 가진 테이블에 적용 */
    .tier-table {
      /* --- 수정: 데이터 표 너비 설정 --- */
      width: 1400px;
      max-width: 95vw;
      /* --- 추가: 최소 너비 설정 --- */
      min-width: 1000px;
      /* ----------------------------- */
      border-collapse: collapse; /* 셀 간 간격 제거 */
      margin-bottom: 0;
      /* --- 복원: 테이블 테두리 --- */
      border: 1px solid white;
      /* --- 추가: 가운데 정렬 --- */
      margin-left: auto;
      margin-right: auto;
      /* 또는 단축 속성: margin: 0 auto; */
    }

    /* --- 추가: 테이블 컨테이너에 가로 스크롤 적용 --- */
    #tier-table-container {
        overflow-x: auto;
    }
    /* --------------------------------------------- */


    .tier-table tr {
        border: none; /* 행 테두리 제거 (기존 유지) */
    }

    .tier-table th,
    .tier-table td {
        /* --- 복원: 셀 테두리 --- */
        border: 1px solid white;
        /* --- 수정: 기본 패딩 제거 (기존 유지) --- */
        padding: 0;
        /* ------------------------------------ */
        vertical-align: top; /* 셀 내용 상단 정렬 (기존 유지) */
    }

    /* 티어 라벨 열 (<th>) 스타일 */
    .tier-table th {
        width: 50px; /* 티어 라벨 열 너비 고정 (기존 유지) */
        text-align: center; /* 티어 라벨 중앙 정렬 (기존 유지) */
        font-size: 1.2em; /* 티어 라벨 글자 크기 (기존 유지) */
        color: #fff; /* 기존 유지 */
        border: 1px solid white; /* 테두리 유지 */
        white-space: nowrap; /* 기존 유지 */
        text-shadow:
          -1px -1px 0 #000, 1px -1px 0 #000,
          -1px  1px 0 #000, 1px  1px 0 #000; /* 기존 유지 */
        padding: 10px; /* 패딩 유지 */
        /* --- 추가: 수직 중앙 정렬 --- */
        vertical-align: middle;
    }

    /* 실험체 이미지 열 (<td>) 스타일 */
    .tier-table td {
        /* --- 수정: 이미지 주변 패딩 제거 --- */
        padding: 0;
        /* -------------------------------- */
        display: block; /* 기존 display: block 유지 */
        /* --- 복원: 배경색 --- */
        background-color: #1a1a17;
    }

    /* no-data 클래스 스타일 유지 */
    .no-data {
      display: inline-block;
      padding: 6px;
      color: #888;
      font-style: italic;
    }

    /* 이미지들을 감싸는 div (displayTierTable에서 생성) */
    .tier-table td > div {
      display: flex;
      flex-wrap: wrap;
      gap: 0; /* 기존 gap: 0 유지 - 이미지 간 간격은 .tooltip-container에서 조정 */
      padding: 0; /* 기존 padding: 0 유지 */
    }

    /* 실험체 이미지 스타일 */
    .tier-table td img {
      vertical-align: middle;
      height: auto; /* 높이 자동 유지 */
      cursor: pointer;
      /* --- 추가: 이미지 자체의 크기는 부모(.tooltip-container)에 맞춤 --- */
      width: 100%;
      height: 100%;
      object-fit: cover; /* 이미지 비율 유지하며 채우기 (기존 유지) */
    }

    /* 툴팁 컨테이너 (이미지 감싸는 span) */
    .tooltip-container {
        position: relative; /* 툴팁 위치 기준 (기존 유지) */
        display: inline-block; /* 이미지 크기에 맞게 (기존 유지) */
        cursor: pointer; /* 마우스 오버 시 커서 변경 (기존 유지) */
        /* --- 추가: 가변 너비 설정 --- */
        width: calc(100% / 15); /* 부모 너비의 1/15로 설정 (기존 유지) */
    }
    /* 툴팁 박스 스타일 */
    .tooltip-box {
        visibility: hidden;
        background-color: rgba(0, 0, 0, 0.8); /* 기존 배경색 유지 */
        color: #fff;
        text-align: left;
        border-radius: 6px;
        padding: 6px 10px;
        /* --- 수정 제안: position을 fixed로 변경하여 새로운 쌓임 맥락 형성 및 최상단 배치 시도 --- */
        position: fixed; /* 뷰포트 기준으로 배치, 새로운 쌓임 맥락 형성 */
        z-index: 9999; /* 가장 높은 레벨에 오도록 시도 */
        /* ----------------------------------------------------------------------------- */
        bottom: 110%; /* position: fixed일 때 뷰포트 기준으로 계산됨 */
        left: 50%; /* position: fixed일 때 뷰포트 기준으로 계산됨 */
        transform: translateX(-50%); /* position: fixed일 때도 적용됨 */
        white-space: nowrap;
        font-size: 12px;
        opacity: 0;
        transition: opacity 0.3s;
    }
    /* 툴팁 컨테이너에 마우스 오버 시 툴팁 표시 */
    .tooltip-container:hover .tooltip-box {
        visibility: visible;
        opacity: 1;
    }

    /* 우측 상단 버전/티어 정보 박스 스타일 (displayTierTable에서 생성) */
    .tier-info {
         position: absolute;
         top: 4px;
         right: 4px;
         padding: 2px 6px;
         background: rgba(255,255,255,0.8);
         border-radius: 4px;
         font-size: 0.85em;
         font-weight: bold;
         white-space: nowrap; /* 줄바꿈 방지 */
         z-index: 5; /* 이미지나 툴팁 아래에 오도록 */
    }

    /* --- 수정: 순위 변동 표시 스타일 (그림자 방식 변경) --- */
    .rank-change-overlay {
        position: absolute;
        bottom: 0; /* 이미지 좌하단 */
        left: 0; /* 이미지 좌하단 */
        padding: 2px 4px;
        font-size: 1em; /* 글자 크기 조정 */
        font-weight: bold;
        white-space: nowrap;
        z-index: 6; /* 이미지 위에, 툴팁 아래 */
        color: transparent; /* 기본 텍스트 색상 투명 (::before 사용 위함) */
    }

    /* --- ::before를 사용한 그림자 구현 --- */
    .rank-change-overlay::before {
        position: absolute;
        z-index: -1; /* 뒤로 보내기 */
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        text-align: center; /* 중앙 정렬 (필요시) */
        line-height: 1.5; /* 세로 중앙 정렬 (필요시) */
        content: attr(data-text); /* data-text 속성 값 사용 */
        -webkit-text-stroke: 0.3em #000000; /* 흰색 테두리 */
        color: inherit; /* 부모의 color 속성 상속 (색상) */
    }
    /* ----------------------------------- */


    .rank-change-up { color: red; } /* 순위 상승 (숫자 감소) */
    .rank-change-down { color: #2e54ff; } /* 순위 하락 (숫자 증가) */
    .rank-change-same { color: #ccc; } /* 순위 변동 없음 */
    /* ----------------------------------- */


    /* 티어별 배경색 (<th>) - 기존 nth-child 선택자 유지 */
    .tier-row th:first-child { background-color: rgb(255,127,127); }
    .tier-row:nth-child(2) th:first-child { background-color: rgb(255,191,127); }
    .tier-row:nth-child(3) th:first-child { background-color: rgb(255,223,127); }
    .tier-row:nth-child(4) th:first-child { background-color: rgb(255,255,127); }
    .tier-row:nth-child(5) th:first-child { background-color: rgb(191,255,127); }
    .tier-row:nth-child(6) th:first-child { background-color: rgb(127,255,127); }
    .tier-row:nth-child(7) th:first-child { background-color: rgb(127,255,255); }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
  <header>
    {% include nav.html %}
    <h1>티어별 실험체 <span id="compare-mode-label" style="font-size: 0.8em; color: #888; display: none;">(비교 모드)</span></h1> <!-- 비교 모드 라벨 추가 -->
  </header>

  <main>
    <div class="dropdowns">
      <table>
        <tr>
          <td class="dropdown-label-cell"><span class="dropdown-label">데이터 1 :</span></td> <!-- 레이블 추가 -->
          <td class="dropdown-set-cell">
            <div class="dropdown-set">
              <select id="version-select"></select>
              <select id="tier-select"></select>
              <select id="period-select"></select>
            </div>
          </td>
          <td class="checkbox-cell" rowspan="2"> <!-- 비교 모드 체크박스 셀, 2행 병합 -->
            <label>
              <input type="checkbox" id="compare-checkbox"> 비교 모드 <!-- ID 변경 및 텍스트 변경 -->
            </label>
          </td>
        </tr>
        <tr id="comparison-controls"> <!-- 데이터 2 행 -->
          <td class="dropdown-label-cell"><span class="dropdown-label">데이터 2 :</span></td> <!-- 레이블 추가 -->
          <td class="dropdown-set-cell">
            <div class="dropdown-set">
              <select id="version-select-compare"></select> <!-- 비교 드롭다운 추가 -->
              <select id="tier-select-compare"></select> <!-- 비교 드롭다운 추가 -->
              <select id="period-select-compare"></select> <!-- 비교 드롭다운 추가 -->
            </div>
          </td>
          <!-- 세 번째 열은 첫 번째 행에서 rowspan으로 병합되었으므로 여기에 td를 추가하지 않음 -->
        </tr>
      </table>
    </div>

    <section id="tier-table-container">
      <table class="tier-table" id="tier-table"></table>
    </section>

    <div id="image-popup" class="image-popup">
      <span class="image-popup-close">×</span>
      <img class="image-popup-content" id="popup-image">
    </div>
    <button id="popup-table-button">표 이미지 팝업</button>
  </main>

  {% include footer.html %}

  <script src="/script_common.js"></script>
  <script src="script_tier_table.js"></script>
</body>
</html>