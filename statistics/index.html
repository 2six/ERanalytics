---
layout: none
---
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>통계</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
  <link rel="shortcut icon" href="/favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="/favicon/site.webmanifest" />
  <style>
    /* 드롭다운 컨트롤 영역 레이아웃 (1행 2열 테이블 사용) */
    .dropdowns {
        margin-bottom: 10px;
        text-align: center; /* 내부 테이블을 가운데 정렬하기 위해 부모에 text-align */
        background-color: transparent; /* 부모 컨테이너 배경색 투명 */
    }
    .dropdowns table {
        margin: 0 auto; /* 가운데 정렬 */
        border-collapse: collapse; /* 셀 간 간격 제거 */
        border: none; /* 테이블 테두리 제거 */
        background-color: transparent; /* 배경색 투명 */
        border-spacing: 0; /* 셀 간격 제거 */
        /* --- 추가: 데이터 표와 동일한 너비 설정 --- */
        width: 1400px;
        max-width: 95vw;
        min-width: 600px;
        /* --------------------------------------- */
    }
    .dropdowns table tr {
        border: none; /* 행 테두리 제거 */
    }
    .dropdowns table td {
        border: none; /* 셀 테두리 제거 */
        padding: 5px; /* 셀 패딩 조정 */
        vertical-align: top; /* 셀 내용 상단 정렬 */
        background-color: transparent; /* 셀 배경색 투명 */
    }

    /* 1행 1열 (드롭다운 세트들) 셀 스타일 */
    .dropdowns .data-sets-cell {
        /* 너비는 내용에 따라 자동 조정 */
        padding-right: 20px; /* 체크박스 셀과의 간격 */
        white-space: nowrap; /* 줄바꿈 방지 */
        text-align: left; /* 통계 페이지는 좌측 정렬 */
    }

    /* 1행 2열 (체크박스) 셀 스타일 */
    .dropdowns .checkbox-cell {
        white-space: nowrap; /* 줄바꿈 방지 */
        vertical-align: middle; /* 세로 중앙 정렬 */
        text-align: right; /* 우측 정렬 */
    }

    /* 각 데이터 세트 (레이블 + 드롭다운 세트) 컨테이너 */
    .dropdowns .data-set-row {
        display: flex; /* 내부 요소들을 가로로 배치 */
        align-items: center; /* 세로 중앙 정렬 */
        gap: 10px; /* 레이블과 드롭다운 세트 사이 간격 */
        /* div는 기본적으로 블록 요소이므로 줄바꿈 발생 */
        margin-bottom: 5px; /* 데이터 1 세트 아래에 여백 추가 (데이터 2 세트와 분리) */
        flex-wrap: nowrap; /* 줄바꿈 방지 */
    }
     /* 마지막 .data-set-row에는 margin-bottom 제거 (선택 사항) */
     .dropdowns table tr:first-child .data-sets-cell .data-set-row:last-child {
          margin-bottom: 0;
     }

    /* "데이터 1 :" 및 "데이터 2 :" 레이블 스타일 */
     .dropdowns .dropdown-label { /* 클래스 선택자 사용 */
         display: none; /* 기본 숨김 (일반 모드) */
         /* --- 추가: 레이블 너비 및 정렬 --- */
         width: 80px; /* 레이블 고정 너비 (텍스트 길이에 따라 조정 필요) */
         flex-shrink: 0; /* 공간 부족해도 줄어들지 않음 */
         text-align: right; /* 텍스트 우측 정렬 */
         /* ----------------------------- */
     }
    /* 비교 모드일 때만 표시 */
     body.is-compare-mode .dropdowns .dropdown-label { /* 비교 모드일 때 모든 레이블 span 표시 */
         display: inline-block; /* inline-block으로 설정하여 너비 적용 */
     }

    /* 드롭다운 세트 컨테이너 스타일 */
    .dropdowns .dropdown-set {
        display: flex; /* 내부 드롭다운들을 Flexbox로 배치 */
        gap: 10px; /* 드롭다운들 사이에 간격 추가 */
        align-items: center; /* 드롭다운들 세로 중앙 정렬 */
        flex-wrap: wrap; /* 공간 부족 시 줄바꿈 허용 */
        flex-shrink: 0; /* 공간 부족해도 줄어들지 않도록 함 */
    }

    /* 메인 데이터 테이블 스타일 */
    #data-container table {
        width: 1400px;
        max-width: 95vw;
        min-width: 600px;
        border-collapse: collapse;
        margin: 20px auto; /* 상하 여백 및 가운데 정렬 */
        /* --- 복원: 테이블 테두리 --- */
        border: 1px solid white;
        /* ------------------------- */
    }

    #data-container th,
    #data-container td {
        border: 1px solid white;
        padding: 8px; /* 통계 페이지 기본 패딩 */
        text-align: center; /* 기본 중앙 정렬 */
        color: #fff;
        background-color: #1a1a17; /* 통계 페이지 기본 배경색 */
    }

    #data-container th {
        cursor: pointer; /* 정렬 가능한 헤더에 커서 표시 */
        white-space: nowrap; /* 헤더 텍스트 줄바꿈 방지 */
    }

     /* 정렬 화살표 스타일 (헤더의 data-arrow 속성 이용) */
     #data-container th[data-arrow]::after {
          content: attr(data-arrow);
          margin-left: 5px;
          font-size: 0.8em;
     }

    /* 테이블 셀 색상 강조 스타일 */
     /* common.js의 applyGradientColorsSingle/Comparison 함수에서 인라인 스타일로 적용 */

     /* 비교 모드 티어 변화 색상 강조 */
     #data-container td[data-tierchange="up"] { color: red; } /* 개선 */
     #data-container td[data-tierchange="down"] { color: blue; } /* 악화 */
     #data-container td[data-tierchange="new"] { color: green; } /* 신규 */
     #data-container td[data-tierchange="removed"] { color: #888; } /* 삭제 */

     /* 비교 모드 순위 변화 색상 강조 (실험체 열) */
     #data-container td[data-col="실험체"][data-rankdelta="new"] { color: green; } /* 신규 */
     #data-container td[data-col="실험체"][data-rankdelta="removed"] { color: #888; } /* 삭제 */
     /* 숫자 순위 변화는 data-rankdelta 값으로 직접 색상 적용 */


    /* --- 추가: 팝업 이미지 관련 스타일 (티어 테이블 페이지에서 복사) --- */
    .image-popup {
      display: none;
      position: fixed;
      z-index: 10000; /* 가장 위에 표시 */
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.9);
    }

    .image-popup-content {
      margin: auto;
      display: block;
      max-width: 90%;
      max-height: 90%;
      position: absolute; /* 뷰포트 중앙 정렬 */
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .image-popup-close {
      position: absolute;
      top: 20px;
      right: 35px;
      color: #f1f1f1;
      font-size: 40px;
      font-weight: bold;
      transition: 0.3s;
      cursor: pointer;
      z-index: 10001; /* 팝업 이미지 위에 표시 */
    }

    .image-popup-close:hover,
    .image-popup-close:focus {
      color: #bbb;
    }

    #popup-table-button {
        display: block;
        margin: 20px auto;
        padding: 10px 20px;
        font-size: 1em;
        cursor: pointer;
    }
    /* ------------------------------------------------------------ */

  </style>
  <!-- --- 추가: html2canvas 라이브러리 로드 (티어 테이블 페이지에서 복사) --- -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <!-- -------------------------------------------------------------- -->
</head>
<body>
  <header>
    {% include nav.html %}
    <h1>통계 <span id="compare-mode-label" style="font-size: 0.8em; color: #888; display: none;">(비교 모드)</span></h1>
  </header>

  <main>
    <div class="dropdowns">
      <table>
        <tr>
          <td class="data-sets-cell">
            <div class="data-set-row">
              <span class="dropdown-label">데이터 1 :</span>
              <div class="dropdown-set">
                <select id="version-select"></select>
                <select id="tier-select"></select>
                <select id="period-select"></select>
              </div>
            </div>
            <div id="comparison-controls" class="data-set-row">
              <span class="dropdown-label">데이터 2 :</span>
              <div class="dropdown-set">
                <select id="version-select-compare"></select>
                <select id="tier-select-compare"></select>
                <select id="period-select-compare"></select>
              </div>
            </div>
          </td>
          <td class="checkbox-cell">
            <label>
              <input type="checkbox" id="compare-checkbox"> 비교 모드
            </label>
             <br> <!-- 통계 페이지에는 색상 강조 체크박스가 별도 줄에 있으므로 <br> 태그 추가 -->
            <label>
              <input type="checkbox" id="gradient-checkbox"> 색상 강조
            </label>
          </td>
        </tr>
      </table>
    </div>

    <section id="data-container">
      <!-- 데이터 테이블 또는 로딩 메시지가 여기에 표시됩니다 -->
    </section>

    <!-- --- 추가: 표 이미지 팝업 및 버튼 HTML 구조 (티어 테이블 페이지에서 복사) --- -->
    <div id="image-popup" class="image-popup">
      <span class="image-popup-close">×</span>
      <img class="image-popup-content" id="popup-image">
    </div>
    <button id="popup-table-button">표 이미지 팝업</button>
    <!-- ------------------------------------------------------------------- -->

  </main>

  {% include footer.html %}

  <script src="/script_common.js"></script>
  <script src="script_statistics.js"></script>
</body>
</html>